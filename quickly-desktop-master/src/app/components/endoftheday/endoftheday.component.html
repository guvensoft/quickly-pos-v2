<div class="row">
  <div class="col-lg-10 pr-0" [ngClass]="{'col-lg-12 pr-3': selectedEndDay !== undefined}">
    <div class="card full-height">
      <div class="card-header">
        <div class="row">
          <div class="col-lg-9">
            Gün Sonu
          </div>
          <div class="col-lg-3 pr-2 pl-0">
            <button *ngIf="selectedEndDay !== undefined" (click)="selectedEndDay = undefined;" class="btn btn-danger btn-sm btn-block">
              <i class="fa fa-backward" aria-hidden="true"></i> Geri Dön
            </button>
          </div>
        </div>
      </div>
      <div class="card-body p-0" [ngClass]="{'flow': selectedEndDay == undefined}">
        <app-day-detail *ngIf="selectedEndDay !== undefined" [printers]="printers" [data]="selectedEndDay"></app-day-detail>
        <table *ngIf="selectedEndDay == undefined" class="table table-striped  table-bordered table-hover">
          <thead class="thead-dark">
            <tr>
              <th width="6%">#</th>
              <th width="34%">
                <i class="fa fa-clock-o" aria-hidden="true"></i> Tarih
              </th>
              <th width="20%" *ngIf="permissions?.end">
                <i class="fa fa-turkish-lira" aria-hidden="true"></i> Toplam Satış
              </th>
              <th width="20%">
                <i class="fa fa-sticky-note" aria-hidden="true"></i> Hesap Sayısı
              </th>
              <!-- <th width="20%">
                <i class="fa fa-user" aria-hidden="true"></i> Kullanıcı
              </th> -->
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of endDayData; let i = index;" (click)="getDetail(item)">
              <td>{{i+1}}</td>
              <td>{{item.timestamp | date:'dd/M/y'}} <span class="pull-right">{{item.timestamp | date:'HH:mm'}} - {{item.data_file.split('.')[0] | date:'HH:mm'}} </span></td>
              <td *ngIf="permissions?.end">{{item.total_income | price }}</td>
              <td>{{item.check_count}} Adet</td>
              <!-- <td>{{item.owner | general:'users' | async}}</td> -->
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div class="col-lg-2" [hidden]="selectedEndDay !== undefined || appType?.type == '1'">
    <button [disabled]="isStarted" (click)="startDay()" class="btn btn-lg btn-success btn-block pt-5 pb-5">Gün Başı</button>
    <button [disabled]="!isStarted" (click)="endDay()" class="btn btn-lg btn-danger btn-block pt-5 pb-5">Gün Sonu</button>
  </div>
</div>

<div class="modal fade" id="endDayModal" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Gün Sonu Yapılıyor...</h4>
      </div>
      <div class="modal-body text-center p-5 text-info">
        <i class="fa fa-refresh fa-5x fa-spin" style="font-size:50vh" aria-hidden="true"></i>
      </div>
      <div class="modal-footer">
        {{progress}}
      </div>
    </div>
  </div>
</div>
