<div class="modal fade" id="callerModal" tabindex="-1" role="dialog" aria-labelledby="callerModal" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title"><i class="fa fa-phone" aria-hidden="true"></i> <strong>Gelen Çağrı</strong></h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <h4 class="text-center">Arayan Numara:</h4>
        <h1 class="text-center">{{call?.number | mask: '0 (000) 000 00 00'}}</h1>
        <div *ngIf="customer">
          <div class="alert alert-success text-center mt-5" role="alert">
            <small>Müşteri Bulundu !</small>
            <h1 class="mt-2"><i class="fa fa-user-circle fa-2x" aria-hidden="true"></i></h1>
            <h2 class="text-center">{{customer.name }} {{customer.surname}}</h2>
            <h5 class="text-center"><b>{{customer.address}}</b></h5>
          </div>

        </div>
        <div *ngIf="!customer">
          <div class="alert alert-danger text-center mt-5" role="alert">
            <strong>Müşteri Bulunamadı !</strong>
          </div>
          <form #customerForm="ngForm">
            <div *ngIf="onUpdate">
              <input type="hidden" name="_id" ngModel>
              <input type="hidden" name="_rev" ngModel>
              <input type="hidden" name="phone_number" [value]="call?.number" ngModel>
              <input type="hidden" name="type" value="1" ngModel>
              <input type="hidden" name="timestamp" value="{{Date.now()}}" ngModel>
            </div>
            <div class="form-group">
              <div class="input-group">
                <div class="input-group-prepend">
                  <div class="input-group-text">Adı</div>
                </div>
                <input type="text" name="name" class="form-control form-control-lg" ngModel />
              </div>
              <div class="input-group">
                <div class="input-group-prepend">
                  <div class="input-group-text">Soyadı</div>
                </div>
                <input type="text" name="surname" class="form-control form-control-lg" ngModel />
              </div>
              <div class="input-group">
                <div class="input-group-prepend">
                  <div class="input-group-text">
                    Adres
                  </div>
                </div>
                <textarea type="text" name="address" rows="5" class="form-control form-control-lg" ngModel></textarea>
              </div>
            </div>
          </form>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-lg btn-secondary" data-dismiss="modal">Kapat</button>
        <button *ngIf="customer" (click)="openCheck()" type="button" class="btn btn-lg btn-info"><i class="fa fa-sticky-note" aria-hidden="true"></i> Hesap Aç</button>
        <button *ngIf="!customer" (click)="saveCustomer(customerForm)" type="button" class="btn btn-lg btn-info"><i class="fa fa-sticky-note" aria-hidden="true"></i> Müşteriyi Kaydet ve Hesap Aç</button>
      </div>
    </div>
  </div>
</div>
